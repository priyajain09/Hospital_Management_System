{% extends 'Reception/base.html' %}
{% from 'Reception/_render_field.html' import render_field %}

{% block links %}
<link rel="stylesheet" href="../../../static/css/bootstrap.min.css">
  <!-- Material Design Bootstrap -->
  <link rel="stylesheet" href="../../../static/css/mdb.min.css">
  <!-- Your custom styles (optional) -->
  <link rel="stylesheet" href="../../../static/css/style.css">

  <link href="../../../static/css1/simple-sidebar.css" rel="stylesheet">
{% endblock %}


{% block scripts %}
<script type="text/javascript" src="../../../static/js/jquery.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="../../../static/js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="../../../static/js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="../../../static/js/mdb.min.js"></script>
{% endblock %}

{% block heading %}
Ongoing Treatments
{% endblock %}

{% block content %}
{% for message in get_flashed_messages() %}
            <div class="alert alert-info" role="alert">{{ message }}</div>
          {% endfor %}
<form  method = "post" action = "{{url_for('recep.add_to_queue',name = name,username = username)}}">
  {{form.hidden_tag()}}  
          <div class = "form-row">
            <div class="col-md-4 mb-3">
                <label for="validationCustomUsername">Treatment ID</label>
                {{render_field(form.treat_id)}}
            </div>
            
            <div class="col-md-4 mb-3">
              <label for="validationCustomUsername">Doctor username</label>
              {{render_field(form.doctor_username)}}
           </div>
          </div> 
          <button class="btn btn-primary btn-sm " type="submit">Add to queue</button>
</form> 


<p>
    Name : {{name}}<br>
    Username : {{username}}
</p>
<br>
<br>
<div class="list-group">
    {% for row in treatments %}
    <a onclick = myFunc({{row.treat_id}}) class="list-group-item list-group-item-action flex-column align-items-start ">
      <div class="d-flex w-100 justify-content-between">
        <h5 class="mb-2 h5">{{row.disease_name}}</h5>
        <small>{{row.timestamp}}</small>
      </div>
      <p class="mb-2">
        <b>Treatment ID</b> : {{row.treat_id}}<br>
        Doctors Involved: 
        {% for doctor in row.alldoctors %}
        {{doctor}}, 
        {% endfor %}<br>
        Total prescriptions: {{row.total_prescriptions}}<br>
        </p>
      
    </a>
    {% endfor %}
  </div>
  <!-- Button trigger modal -->

<script>
  function myFunc(treat_id){
    document.getElementById("treatId").value = treat_id;
  }
 
</script>
  
{% endblock %}



   